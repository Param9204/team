<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Team Generator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      padding: 40px;
      text-align: center;
      color: white;
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      padding: 40px;
    }

    .input-section {
      background: #f8fafc;
      border-radius: 16px;
      padding: 30px;
      border: 1px solid #e2e8f0;
    }

    .section-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: #1e293b;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-title::before {
      content: '';
      width: 4px;
      height: 24px;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      border-radius: 2px;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      font-weight: 500;
      color: #374151;
      margin-bottom: 8px;
      font-size: 0.95rem;
    }

    textarea, input[type="number"], select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.2s ease;
      background: white;
    }

    textarea:focus, input:focus, select:focus {
      outline: none;
      border-color: #4facfe;
      box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
    }

    textarea {
      min-height: 120px;
      resize: vertical;
      font-family: inherit;
    }

    .input-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .captain-selectors {
      max-height: 200px;
      overflow-y: auto;
      padding: 10px 0;
    }

    .captain-selector {
      margin-bottom: 15px;
    }

    .captain-selector:last-child {
      margin-bottom: 0;
    }

    .button-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }

    .btn-danger {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      color: white;
    }

    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
    }

    .results-section {
      background: #f8fafc;
      border-radius: 16px;
      padding: 30px;
      border: 1px solid #e2e8f0;
      min-height: 400px;
    }

    .summary-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid #e2e8f0;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .summary-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #1e293b;
      margin-bottom: 10px;
    }

    .summary-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
    }

    .stat-item {
      text-align: center;
      padding: 15px;
      background: #f1f5f9;
      border-radius: 8px;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #4facfe;
    }

    .stat-label {
      font-size: 0.9rem;
      color: #64748b;
      margin-top: 5px;
    }

    .teams-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .team-card {
      background: white;
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border: 1px solid #e2e8f0;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .team-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #4facfe, #00f2fe, #667eea);
    }

    .team-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .team-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .team-name {
      font-size: 1.3rem;
      font-weight: 700;
      color: #1e293b;
    }

    .team-count {
      background: #4facfe;
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .captain-info {
      background: linear-gradient(135deg, #4facfe20, #00f2fe20);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      border-left: 4px solid #4facfe;
    }

    .captain-label {
      font-size: 0.85rem;
      font-weight: 500;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .captain-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: #1e293b;
      margin-top: 5px;
    }

    .members-list {
      list-style: none;
    }

    .members-list li {
      padding: 8px 12px;
      background: #f8fafc;
      border-radius: 8px;
      margin-bottom: 8px;
      font-weight: 500;
      color: #374151;
    }

    .members-list li:last-child {
      margin-bottom: 0;
    }

    .error-message {
      background: linear-gradient(135deg, #ff6b6b20, #ee5a5220);
      border: 1px solid #ff6b6b;
      border-radius: 10px;
      padding: 15px;
      color: #dc2626;
      font-weight: 500;
      margin-bottom: 20px;
    }

    .unassigned-alert {
      background: linear-gradient(135deg, #fbbf2420, #f59e0b20);
      border: 1px solid #f59e0b;
      border-radius: 10px;
      padding: 15px;
      color: #92400e;
      font-weight: 500;
      margin-top: 20px;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #64748b;
    }

    .empty-state svg {
      width: 80px;
      height: 80px;
      margin-bottom: 20px;
      opacity: 0.5;
    }

    @media (max-width: 768px) {
      .main-content {
        grid-template-columns: 1fr;
        gap: 30px;
        padding: 20px;
      }

      .header {
        padding: 30px 20px;
      }

      .header h1 {
        font-size: 2rem;
      }

      .input-row {
        grid-template-columns: 1fr;
      }

      .button-group {
        justify-content: center;
      }

      .teams-grid {
        grid-template-columns: 1fr;
      }

      .summary-stats {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Team Generator</h1>
      <p>Create balanced teams with designated captains</p>
    </div>

    <div class="main-content">
      <div class="input-section">
        <h2 class="section-title">Setup</h2>
        
        <div class="form-group">
          <label for="members">Team Members (one per line):</label>
          <textarea id="members" placeholder="Enter member names, one per line...">Alice
Bob
Charlie
David
Eve
Frank
Grace
Heidi
Ivan
Judy
Mallory
Oscar
Peggy</textarea>
        </div>

        <div class="input-row">
          <div class="form-group">
            <label for="numTeams">Number of Teams:</label>
            <input id="numTeams" type="number" min="1" value="3" />
          </div>
          <div class="form-group">
            <label for="teamSize">Max Team Size (optional):</label>
            <input id="teamSize" type="number" min="1" placeholder="Auto" />
          </div>
        </div>

        <div class="form-group">
          <label>Team Captains:</label>
          <div id="captainSelectors" class="captain-selectors"></div>
        </div>

        <div class="button-group">
          <button id="generateBtn" class="btn btn-primary">
            <span>⚡</span> Generate Teams
          </button>
          <button id="randomizeCaptainsBtn" class="btn btn-secondary">
            <span>🎲</span> Random Captains
          </button>
          <button id="resetBtn" class="btn btn-danger">
            <span>🔄</span> Reset
          </button>
        </div>
      </div>

      <div class="results-section">
        <h2 class="section-title">Results</h2>
        
        <div id="error" class="error-message" style="display: none;"></div>
        
        <div id="summary" class="summary-card" style="display: none;">
          <div class="summary-title">Team Summary</div>
          <div id="summaryStats" class="summary-stats"></div>
        </div>

        <div id="unassigned" class="unassigned-alert" style="display: none;"></div>

        <div id="teams" class="teams-grid"></div>

        <div id="emptyState" class="empty-state">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zM4 18v-4h3v-3h2l3 4h7v3H4zM12.5 11.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5S11 9.17 11 10s.67 1.5 1.5 1.5z"/>
          </svg>
          <h3>Ready to Generate Teams</h3>
          <p>Configure your settings above and click "Generate Teams" to get started</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    class TeamGenerator {
      constructor(members, numTeams, teamSize, captains) {
        this.members = members.filter(Boolean);
        this.numTeams = numTeams;
        this.teamSize = teamSize;
        this.captains = captains;
      }

      static shuffle(arr) {
        let array = arr.slice();
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      assignTeams() {
        let pool = this.members.filter(m => !this.captains.includes(m));
        let membersShuffled = TeamGenerator.shuffle(pool);

        let teams = Array.from({length: this.numTeams}, (_, i) => ({
          captain: this.captains[i] || null,
          members: [],
        }));

        let maxMembers = this.teamSize && this.teamSize > 0
          ? Math.max(0, this.teamSize - 1) // Subtract 1 for captain
          : Math.ceil(membersShuffled.length / this.numTeams);

        let idx = 0;
        membersShuffled.forEach(member => {
          let placed = false, attempts = 0;
          while (!placed && attempts < this.numTeams) {
            if (teams[idx % this.numTeams].members.length < maxMembers) {
              teams[idx % this.numTeams].members.push(member);
              placed = true;
            }
            idx++;
            attempts++;
          }
        });

        let assignedMembers = teams.flatMap(t => t.members);
        let unassigned = membersShuffled.filter(m => !assignedMembers.includes(m));
        return { teams, unassigned };
      }
    }

    function getMembers() {
      return document.getElementById('members').value.split('\n').map(m => m.trim()).filter(Boolean);
    }

    function getNumTeams() {
      return parseInt(document.getElementById('numTeams').value, 10) || 1;
    }

    function getTeamSize() {
      const sizeVal = document.getElementById('teamSize').value;
      return sizeVal ? parseInt(sizeVal, 10) : null;
    }

    function getCaptains() {
      return Array.from(document.querySelectorAll('.captain-select')).map(sel => sel.value);
    }

    function updateCaptainSelectors() {
      const members = getMembers();
      const numTeams = getNumTeams();
      const selectorsDiv = document.getElementById('captainSelectors');
      selectorsDiv.innerHTML = '';
      
      for (let i = 0; i < numTeams; i++) {
        const div = document.createElement('div');
        div.className = 'captain-selector';
        
        const label = document.createElement('label');
        label.innerText = `Captain for Team ${i + 1}:`;
        
        const select = document.createElement('select');
        select.className = "captain-select";
        select.name = `captain${i}`;
        
        members.forEach(m => {
          const opt = document.createElement('option');
          opt.value = m;
          opt.innerText = m;
          select.appendChild(opt);
        });
        
        div.appendChild(label);
        div.appendChild(select);
        selectorsDiv.appendChild(div);
      }
    }

    function validateInputs(members, numTeams, captains, teamSize) {
      if (numTeams < 1 || numTeams > members.length)
        return "Number of teams must be at least 1 and at most the number of members.";
      if (new Set(captains).size < numTeams)
        return "Each captain must be unique.";
      if (captains.some(c => !members.includes(c)))
        return "All captains must be chosen from the members list.";
      if (teamSize && (teamSize < 1 || teamSize > members.length))
        return "Team size must be between 1 and the total number of members.";
      return "";
    }

    function showError(message) {
      const errorDiv = document.getElementById('error');
      errorDiv.textContent = message;
      errorDiv.style.display = message ? 'block' : 'none';
    }

    function hideResults() {
      document.getElementById('summary').style.display = 'none';
      document.getElementById('unassigned').style.display = 'none';
      document.getElementById('teams').innerHTML = '';
      document.getElementById('emptyState').style.display = 'block';
    }

    function showResults() {
      document.getElementById('emptyState').style.display = 'none';
    }

    function displaySummary(teams, totalMembers, captains) {
      const summaryDiv = document.getElementById('summary');
      const statsDiv = document.getElementById('summaryStats');
      
      const avgTeamSize = (teams.reduce((sum, team) => sum + team.members.length + 1, 0) / teams.length).toFixed(1);
      
      statsDiv.innerHTML = `
        <div class="stat-item">
          <div class="stat-value">${totalMembers}</div>
          <div class="stat-label">Total Members</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${teams.length}</div>
          <div class="stat-label">Teams Created</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${avgTeamSize}</div>
          <div class="stat-label">Avg Team Size</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${captains.length}</div>
          <div class="stat-label">Team Captains</div>
        </div>
      `;
      
      summaryDiv.style.display = 'block';
    }

    function displayTeams(teams) {
      const teamsDiv = document.getElementById('teams');
      teamsDiv.innerHTML = '';
      
      teams.forEach((team, i) => {
        const teamCard = document.createElement('div');
        teamCard.className = 'team-card';
        
        const totalSize = team.members.length + (team.captain ? 1 : 0);
        
        teamCard.innerHTML = `
          <div class="team-header">
            <div class="team-name">Team ${i + 1}</div>
            <div class="team-count">${totalSize} member${totalSize !== 1 ? 's' : ''}</div>
          </div>
          ${team.captain ? `
            <div class="captain-info">
              <div class="captain-label">Team Captain</div>
              <div class="captain-name">${team.captain}</div>
            </div>
          ` : ''}
          ${team.members.length > 0 ? `
            <ul class="members-list">
              ${team.members.map(member => `<li>${member}</li>`).join('')}
            </ul>
          ` : '<p style="color: #64748b; font-style: italic;">No additional members</p>'}
        `;
        
        teamsDiv.appendChild(teamCard);
      });
    }

    function displayUnassigned(unassigned) {
      const unassignedDiv = document.getElementById('unassigned');
      if (unassigned.length > 0) {
        unassignedDiv.innerHTML = `<strong>⚠️ Unassigned Members:</strong> ${unassigned.join(', ')}`;
        unassignedDiv.style.display = 'block';
      } else {
        unassignedDiv.style.display = 'none';
      }
    }

    function resetForm() {
      document.getElementById('members').value = `Alice
Bob
Charlie
David
Eve
Frank
Grace
Heidi
Ivan
Judy
Mallory
Oscar
Peggy`;
      document.getElementById('numTeams').value = '3';
      document.getElementById('teamSize').value = '';
      updateCaptainSelectors();
      showError('');
      hideResults();
    }

    // Event Listeners
    document.getElementById('members').addEventListener('input', updateCaptainSelectors);
    document.getElementById('numTeams').addEventListener('input', updateCaptainSelectors);

    document.getElementById('randomizeCaptainsBtn').onclick = function () {
      const members = getMembers();
      const numTeams = getNumTeams();
      if (members.length < numTeams) return;
      
      const chosenCaptains = TeamGenerator.shuffle(members).slice(0, numTeams);
      const captainSelects = document.querySelectorAll('.captain-select');
      captainSelects.forEach((sel, i) => {
        sel.value = chosenCaptains[i];
      });
    };

    document.getElementById('resetBtn').onclick = resetForm;

    document.getElementById('generateBtn').onclick = function () {
      const members = getMembers();
      const numTeams = getNumTeams();
      const teamSize = getTeamSize();
      const captains = getCaptains();

      const errorMsg = validateInputs(members, numTeams, captains, teamSize);
      
      if (errorMsg) {
        showError(errorMsg);
        hideResults();
        return;
      }

      showError('');
      showResults();

      const generator = new TeamGenerator(members, numTeams, teamSize, captains);
      const { teams, unassigned } = generator.assignTeams();

      const nonCaptainMembers = members.filter(m => !captains.includes(m));
      
      displaySummary(teams, members.length, captains);
      displayTeams(teams);
      displayUnassigned(unassigned);
    };

    // Initialize
    updateCaptainSelectors();
  </script>
</body>
</html>